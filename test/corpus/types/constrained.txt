======================================
Basic Type without constraints (alias)
======================================

type Turn = Float

---

(program
  (type_declaration
    (constrained_type
      (constrained_type_name)
      (float_type))))

===============================
Type with oneof constraint
===============================

type CSSColorName = "red" | "green" | "blue" | "rebeccapurple" | "aliceblue"
type Status = 200 | 404 | 500

---

(program
  (type_declaration
    (constrained_type
      (constrained_type_name)
      (literal_union
        (literal_val
          (string_literal
            (string_content)))
        (literal_val
          (string_literal
            (string_content)))
        (literal_val
          (string_literal
            (string_content)))
        (literal_val
          (string_literal
            (string_content)))
        (literal_val
          (string_literal
            (string_content))))))
  (type_declaration
    (constrained_type
      (constrained_type_name)
      (literal_union
        (literal_val
          (integer))
        (literal_val
          (integer))
        (literal_val
          (integer))))))

=================================
Type with range constraints
=================================

type Angle = Float where range(0..<360), precision(6, round_up)
type Radian = Float64 where range(0..=2*PI), precision(2, round_trunc)
type Alpha = Float32 where range(0..=1)

---

(program
  (type_declaration
    (constrained_type
      (constrained_type_name)
      (float_type)
      (constraints
        (constraint
          (range_constraint
            (integer)
            (less_than_comparator)
            (integer)))
        (constraint
          (precision_constraint
            (integer)
            (rounding_mode
              (up_rounding_mode)))))))
  (type_declaration
    (constrained_type
      (constrained_type_name)
      (float_type)
      (constraints
        (constraint
          (range_constraint
            (integer)
            (equal_to_comparator)
            (constraint_multiplication
              (integer)
              (const_identifier))))
        (constraint
          (precision_constraint
            (integer)
            (rounding_mode
              (truncate_rounding_mode)))))))
  (type_declaration
    (constrained_type
      (constrained_type_name)
      (float_type)
      (constraints
        (constraint
          (range_constraint
            (integer)
            (equal_to_comparator)
            (integer)))))))

==================================
Type with pattern constraint
==================================

type HexStr = Str where pattern(r/^#(?:[0-9a-fA-F]{3}){1,2}$/)

---

(program
  (type_declaration
    (constrained_type
      (constrained_type_name)
      (string_type)
      (constraints
        (constraint
          (pattern_constraint
            (regex_literal)))))))

=========================
Type with step constraint
=========================

// Only multiples of 0.25 (for currency with quarter precision)
type Quarter = Float where range(0..=100), step(0.25)
// Valid: 0, 0.25, 0.5, 0.75, 1.0, 1.25, ...

// Degrees in 15Â° increments
type CompassHeading = Int where range(0..<360), step(15)
// Valid: 0, 15, 30, 45, ..., 345

---

(program
  (comment)
  (type_declaration
    (constrained_type
      (constrained_type_name)
      (float_type)
      (constraints
        (constraint
          (range_constraint
            (integer)
            (equal_to_comparator)
            (integer)))
        (constraint
          (step_constraint
            (float))))))
  (comment)
  (comment)
  (type_declaration
    (constrained_type
      (constrained_type_name)
      (signed_integer_type)
      (constraints
        (constraint
          (range_constraint
            (integer)
            (less_than_comparator)
            (integer)))
        (constraint
          (step_constraint
            (integer))))))
  (comment))

===================================
Type without right side is an error
===================================

type Foo =

---

(program
  (type_declaration
    (constrained_type
      (constrained_type_name)
      (literal_union
        (literal_val
          (integer
            (MISSING _digit_sequence)))))))         